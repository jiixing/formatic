!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Formatic=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=require("./lib/formatic")},{"./lib/formatic":41}],2:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;var CSSTransitionGroup=React.createFactory(React.addons.CSSTransitionGroup);module.exports=React.createClass({displayName:"Array",mixins:[require("../../mixins/field")],nextLookupId:0,getInitialState:function getInitialState(){var lookups=[];var items=this.props.field.value;items.forEach(function(item,i){lookups[i]="_"+this.nextLookupId;this.nextLookupId++}.bind(this));return{lookups:lookups}},componentWillReceiveProps:function componentWillReceiveProps(newProps){var lookups=this.state.lookups;var items=newProps.field.value;if(items.length>lookups.length){for(var i=lookups.length;i<items.length;i++){lookups[i]="_"+this.nextLookupId;this.nextLookupId++}}this.setState({lookups:lookups})},onChange:function onChange(i,newValue,info){var newArrayValue=this.props.field.value.slice(0);newArrayValue[i]=newValue;this.onBubbleValue(newArrayValue,info)},onAppend:function onAppend(itemChoiceIndex){var config=this.props.config;var field=this.props.field;var newValue=config.createNewChildFieldValue(field,itemChoiceIndex);var items=field.value;items=items.concat(newValue);this.onChangeValue(items)},onRemove:function onRemove(i){var lookups=this.state.lookups;lookups.splice(i,1);this.setState({lookups:lookups});var newItems=this.props.field.value.slice(0);newItems.splice(i,1);this.onChangeValue(newItems)},onMove:function onMove(fromIndex,toIndex){var lookups=this.state.lookups;var fromId=lookups[fromIndex];var toId=lookups[toIndex];lookups[fromIndex]=toId;lookups[toIndex]=fromId;this.setState({lookups:lookups});var newItems=this.props.field.value.slice(0);if(fromIndex!==toIndex&&fromIndex>=0&&fromIndex<newItems.length&&toIndex>=0&&toIndex<newItems.length){newItems.splice(toIndex,0,newItems.splice(fromIndex,1)[0])}this.onChangeValue(newItems)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fields=config.createChildFields(field);var numItems=field.value.length;return config.createElement("field",{field:field,plain:this.props.plain},R.div({className:cx(this.props.classes)},CSSTransitionGroup({transitionName:"reveal"},fields.map(function(childField,i){return config.createElement("array-item",{key:this.state.lookups[i],field:childField,index:i,numItems:numItems,onMove:this.onMove,onRemove:this.onRemove,onChange:this.onChange,onAction:this.onBubbleAction})}.bind(this))),config.createElement("array-control",{field:field,onAppend:this.onAppend})))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],3:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"Boolean",mixins:[require("../../mixins/field")],onChange:function onChange(newValue){this.onChangeValue(newValue)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var choices=config.fieldBooleanChoices(field);return config.createElement("field",{field:field,plain:this.props.plain},config.createElement("select-value",{choices:choices,field:field,onChange:this.onChange,onAction:this.onBubbleAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],4:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"CheckboxArray",mixins:[require("../../mixins/field")],getInitialState:function getInitialState(){return{choices:this.props.config.fieldChoices(this.props.field)}},componentWillReceiveProps:function componentWillReceiveProps(newProps){this.setState({choices:newProps.config.fieldChoices(newProps.field)})},onChange:function onChange(){var choiceNodes=this.refs.choices.getDOMNode().getElementsByTagName("input");choiceNodes=Array.prototype.slice.call(choiceNodes,0);var values=choiceNodes.map(function(node){return node.checked?node.value:null}).filter(function(value){return value});this.onChangeValue(values)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var choices=this.state.choices||[];var isInline=!_.find(choices,function(choice){return choice.sample});return config.createElement("field",{field:field},R.div({className:cx(this.props.classes),ref:"choices"},choices.map(function(choice,i){var inputField=R.span({style:{whiteSpace:"nowrap"}},R.input({name:field.key,type:"checkbox",value:choice.value,checked:field.value.indexOf(choice.value)>=0?true:false,onChange:this.onChange,onFocus:this.onFocusAction,onBlur:this.onBlurAction})," ",R.span({className:"field-choice-label"},choice.label));if(isInline){return R.span({key:i,className:"field-choice"},inputField," ")}else{return R.div({key:i,className:"field-choice"},inputField," ",config.createElement("sample",{field:field,choice:choice}))}}.bind(this))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],5:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"CheckboxBoolean",mixins:[require("../../mixins/field")],onChange:function onChange(event){this.onChangeValue(event.target.checked)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{config:config,field:field,plain:true},R.span({style:{whiteSpace:"nowrap"}},R.input({type:"checkbox",checked:field.value,className:cx(this.props.classes),onChange:this.onChange,onFocus:this.onFocusAction,onBlur:this.onBlurAction}),R.span({}," "),R.span({},config.fieldHelpText(field)||config.fieldLabel(field))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],6:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Copy",mixins:[require("../../mixins/field")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.div({className:cx(this.props.classes),dangerouslySetInnerHTML:{__html:this.props.config.fieldHelpText(this.props.field)}})}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],7:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Fields",mixins:[require("../../mixins/field")],onChangeField:function onChangeField(key,newValue,info){if(key){var newObjectValue=_.extend({},this.props.field.value);newObjectValue[key]=newValue;this.onBubbleValue(newObjectValue,info)}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fields=config.createChildFields(field);return config.createElement("field",{config:config,field:field,plain:this.props.plain},R.fieldset({className:cx(this.props.classes)},fields.map(function(childField,i){var key=childField.key||i;return config.createFieldElement({key:key||i,field:childField,onChange:this.onChangeField.bind(this,key),onAction:this.onBubbleAction})}.bind(this))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],8:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Json",mixins:[require("../../mixins/field")],getDefaultProps:function getDefaultProps(){return{rows:5}},isValidValue:function isValidValue(value){try{JSON.parse(value);return true}catch(e){return false}},getInitialState:function getInitialState(){return{isValid:true,value:JSON.stringify(this.props.field.value,null,2)}},onChange:function onChange(event){var isValid=this.isValidValue(event.target.value);if(isValid){this._isChanging=true;this.onChangeValue(JSON.parse(event.target.value))}this.setState({isValid:isValid,value:event.target.value})},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!this._isChanging){this.setState({isValid:true,value:JSON.stringify(nextProps.field.value,null,2)})}this._isChanging=false},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{field:config.fieldWithValue(field,this.state.value),plain:this.props.plain},R.textarea({className:cx(this.props.classes),value:this.state.value,onChange:this.onChange,style:{backgroundColor:this.state.isValid?"":"rgb(255,200,200)"},rows:config.fieldRows(field)||this.props.rows,onFocus:this.onFocusAction,onBlur:this.onBlurAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],9:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;var CSSTransitionGroup=React.createFactory(React.addons.CSSTransitionGroup);var tempKeyPrefix="$$__temp__";var tempKey=function tempKey(id){return tempKeyPrefix+id};var isTempKey=function isTempKey(key){return key.substring(0,tempKeyPrefix.length)===tempKeyPrefix};module.exports=React.createClass({displayName:"Object",mixins:[require("../../mixins/field")],nextLookupId:0,getInitialState:function getInitialState(){var keyToId={};var keys=Object.keys(this.props.field.value);var keyOrder=[];var tempDisplayKeys={};keys.forEach(function(key){var id=++this.nextLookupId;keyToId[key]=id;keyOrder.push(key);if(isTempKey(key)){tempDisplayKeys[id]=""}}.bind(this));return{keyToId:keyToId,keyOrder:keyOrder,tempDisplayKeys:tempDisplayKeys}},componentWillReceiveProps:function componentWillReceiveProps(newProps){var keyToId=this.state.keyToId;var newKeyToId={};var tempDisplayKeys=this.state.tempDisplayKeys;var newTempDisplayKeys={};var keyOrder=this.state.keyOrder;var keys=Object.keys(newProps.field.value);var addedKeys=[];keys.forEach(function(key){if(!keyToId[key]){this.nextLookupId++;newKeyToId[key]=this.nextLookupId;addedKeys.push(key)}else{newKeyToId[key]=keyToId[key]}if(isTempKey(key)&&newKeyToId[key]in tempDisplayKeys){newTempDisplayKeys[newKeyToId[key]]=tempDisplayKeys[newKeyToId[key]]}}.bind(this));var newKeyOrder=[];keyOrder.forEach(function(key){if(newKeyToId[key]){newKeyOrder.push(key)}});newKeyOrder=newKeyOrder.concat(addedKeys);this.setState({keyToId:newKeyToId,keyOrder:newKeyOrder,tempDisplayKeys:newTempDisplayKeys})},onChange:function onChange(key,newValue,info){var newObj=_.extend({},this.props.field.value);newObj[key]=newValue;this.onBubbleValue(newObj,info)},onAppend:function onAppend(itemChoiceIndex){var config=this.props.config;var field=this.props.field;this.nextLookupId++;var keyToId=this.state.keyToId;var keyOrder=this.state.keyOrder;var tempDisplayKeys=this.state.tempDisplayKeys;var id=this.nextLookupId;var newKey=tempKey(id);keyToId[newKey]=id;tempDisplayKeys[id]="";keyOrder.push(newKey);this.setState({keyToId:keyToId,tempDisplayKeys:tempDisplayKeys,keyOrder:keyOrder});var newObj=_.extend(this.props.field.value);var newValue=config.createNewChildFieldValue(field,itemChoiceIndex);newObj[newKey]=newValue;this.onChangeValue(newObj)},onRemove:function onRemove(key){var newObj=_.extend(this.props.field.value);delete newObj[key];this.onChangeValue(newObj)},onMove:function onMove(fromKey,toKey){if(fromKey!==toKey){var keyToId=this.state.keyToId;var keyOrder=this.state.keyOrder;var tempDisplayKeys=this.state.tempDisplayKeys;var newObj=_.extend(this.props.field.value);if(keyToId[toKey]){var tempToKey=tempKey(keyToId[toKey]);tempDisplayKeys[keyToId[toKey]]=toKey;keyToId[tempToKey]=keyToId[toKey];keyOrder[keyOrder.indexOf(toKey)]=tempToKey;delete keyToId[toKey];this.setState({keyToId:keyToId,tempDisplayKeys:tempDisplayKeys,keyOrder:keyOrder});newObj[tempToKey]=newObj[toKey];delete newObj[toKey]}if(!toKey){toKey=tempKey(keyToId[fromKey]);tempDisplayKeys[keyToId[fromKey]]=""}keyToId[toKey]=keyToId[fromKey];delete keyToId[fromKey];keyOrder[keyOrder.indexOf(fromKey)]=toKey;this.setState({keyToId:keyToId,keyOrder:keyOrder,tempDisplayKeys:tempDisplayKeys});newObj[toKey]=newObj[fromKey];delete newObj[fromKey];this.onChangeValue(newObj);if(fromKey&&fromKey!==toKey){if(!(fromKey in newObj)){Object.keys(newObj).forEach(function(key){if(!isTempKey(key)){return}var id=keyToId[key];var displayKey=tempDisplayKeys[id];if(fromKey===displayKey){this.onMove(key,displayKey)}}.bind(this))}}}},getFields:function getFields(){var config=this.props.config;var field=this.props.field;var fields=config.createChildFields(field);var keyToField={};_.each(fields,function(childField){keyToField[childField.key]=childField});return this.state.keyOrder.map(function(key){return keyToField[key]})},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fields=this.getFields();return config.createElement("field",{field:field,plain:this.props.plain},R.div({className:cx(this.props.classes)},CSSTransitionGroup({transitionName:"reveal"},fields.map(function(childField){var displayKey=this.state.tempDisplayKeys[this.state.keyToId[childField.key]];if(_.isUndefined(displayKey)){displayKey=childField.key}return config.createElement("object-item",{key:this.state.keyToId[childField.key],field:childField,onMove:this.onMove,onRemove:this.onRemove,onChange:this.onChange,onAction:this.onBubbleAction,displayKey:displayKey,itemKey:childField.key})}.bind(this))),config.createElement("object-control",{field:field,onAppend:this.onAppend})))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],10:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"PrettyBoolean",mixins:[require("../../mixins/field")],onChange:function onChange(newValue){this.onChangeValue(newValue)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var choices=config.fieldBooleanChoices(field);return config.createElement("field",{field:field,plain:this.props.plain},config.createElement("pretty-select-value",{choices:choices,field:field,onChange:this.onChange,onAction:this.onBubbleAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],11:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"PrettySelect",mixins:[require("../../mixins/field")],getInitialState:function getInitialState(){return{choices:this.props.config.fieldPrettyChoices(this.props.field)}},componentWillReceiveProps:function componentWillReceiveProps(newProps){this.setState({choices:newProps.config.fieldPrettyChoices(newProps.field)})},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{config:config,field:field,plain:this.props.plain},config.createElement("pretty-select-value",{choices:this.state.choices,field:field,onChange:this.onChangeValue,onAction:this.onBubbleAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],12:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var TagTranslator=require("../helpers/tag-translator");var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"PrettyText",mixins:[require("../../mixins/field")],componentDidMount:function componentDidMount(){this.createEditor()},componentDidUpdate:function componentDidUpdate(prevProps,prevState){if(prevState.codeMirrorMode!==this.state.codeMirrorMode){this.createEditor()}if(this.state.codeMirrorMode&&this.codeMirror.getValue().match(/\{\{.+\}\}/)){this.updatingCodeMirror=true;var cmValue=this.codeMirror.getValue();var decodedValue=this.state.translator.decodeValue(cmValue);var encodedValue=this.state.translator.encodeValue(decodedValue);var cursor=this.codeMirror.getCursor();cursor.ch-=cmValue.length-encodedValue.length;this.codeMirror.setValue(encodedValue);this.codeMirror.setCursor(cursor)}},componentWillUnmount:function componentWillUnmount(){if(this.state.codeMirrorMode){this.removeCodeMirrorEditor()}},getInitialState:function getInitialState(){var replaceChoices=this.props.config.fieldReplaceChoices(this.props.field);var translator=TagTranslator(replaceChoices,this.props.config.humanize);return{value:this.props.field.value,codeMirrorMode:false,isChoicesOpen:false,replaceChoices:replaceChoices,translator:translator}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){var replaceChoices=this.props.config.fieldReplaceChoices(nextProps.field);var nextState={replaceChoices:replaceChoices};this.state.translator.addChoices(replaceChoices);if(this.state.value!==nextProps.field.value&&nextProps.field.value){nextState.value=nextProps.field.value}this.setState(nextState)},handleChoiceSelection:function handleChoiceSelection(key){this.setState({isChoicesOpen:false});var char=this.state.translator.encodeTag(key);this.codeMirror.replaceSelection(char,"end");this.codeMirror.focus()},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var props={field:field,plain:this.props.plain};var tabIndex=field.tabIndex;var textBoxClasses=cx(_.extend({},this.props.classes,{"pretty-text-box":true}));var textBox=this.createTextBoxNode();var insertBtn=config.createElement("insert-button",{ref:"toggle",onClick:this.onToggleChoices},"Insert...");var choices=config.createElement("choices",{ref:"choices",choices:this.state.replaceChoices,open:this.state.isChoicesOpen,ignoreCloseNodes:this.getCloseIgnoreNodes,onSelect:this.handleChoiceSelection,onClose:this.onCloseChoices});var element=React.createElement("div",{className:"pretty-text-wrapper",onMouseEnter:this.switchToCodeMirror},React.createElement("div",{className:textBoxClasses,tabIndex:tabIndex},textBox),insertBtn,choices);return config.createElement("field",props,element)},getCloseIgnoreNodes:function getCloseIgnoreNodes(){return this.refs.toggle.getDOMNode()},onToggleChoices:function onToggleChoices(){this.setChoicesOpen(!this.state.isChoicesOpen)},setChoicesOpen:function setChoicesOpen(isOpen){var action=isOpen?"open-replacements":"close-replacements";this.onStartAction(action);this.setState({isChoicesOpen:isOpen})},onCloseChoices:function onCloseChoices(){if(this.state.isChoicesOpen){this.setChoicesOpen(false)}},createTextBoxNode:function createTextBoxNode(){if(this.state.codeMirrorMode){return React.createElement("div",{ref:"textBox"})}else{var html=this.state.translator.toHtml(this.state.value);return React.createElement("div",{ref:"textBox",dangerouslySetInnerHTML:{__html:html}})}},createEditor:function createEditor(){if(this.state.codeMirrorMode){this.createCodeMirrorEditor()}else{this.createReadonlyEditor()}},createCodeMirrorEditor:function createCodeMirrorEditor(){var cmValue=this.state.translator.encodeValue(this.state.value);var options={lineWrapping:true,tabindex:this.props.tabIndex,value:cmValue,specialChars:this.state.translator.specialCharsRegexp,specialCharPlaceholder:this.createTagNode,extraKeys:{Tab:false}};var textBox=this.refs.textBox.getDOMNode();textBox.innerHTML="";this.codeMirror=CodeMirror(textBox,options);this.codeMirror.on("change",this.onCodeMirrorChange)},onCodeMirrorChange:function onCodeMirrorChange(){if(this.updatingCodeMirror){this.updatingCodeMirror=false;return}var newValue=this.state.translator.decodeValue(this.codeMirror.getValue());this.onChangeValue(newValue);this.setState({value:newValue})},createReadonlyEditor:function createReadonlyEditor(){var textBoxNode=this.refs.textBox.getDOMNode();textBoxNode.innerHTML=this.state.translator.toHtml(this.state.value)},removeCodeMirrorEditor:function removeCodeMirrorEditor(){var textBoxNode=this.refs.textBox.getDOMNode();var cmNode=textBoxNode.firstChild;textBoxNode.removeChild(cmNode);this.codeMirror=null},switchToCodeMirror:function switchToCodeMirror(){if(!this.state.codeMirrorMode){this.setState({codeMirrorMode:true})}},createTagNode:function createTagNode(char){var node=document.createElement("span");var label=this.state.translator.decodeChar(char);React.render(React.createElement("span",{className:"pretty-part",onClick:this.onToggleChoices},label),node);return node}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43,"../helpers/tag-translator":39}],13:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"Select",mixins:[require("../../mixins/field")],getInitialState:function getInitialState(){return{choices:this.props.config.fieldChoices(this.props.field)}},componentWillReceiveProps:function componentWillReceiveProps(newProps){this.setState({choices:newProps.config.fieldChoices(newProps.field)})},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{config:config,field:field,plain:this.props.plain},config.createElement("select-value",{choices:this.state.choices,field:field,onChange:this.onChangeValue,onAction:this.onBubbleAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],14:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"SingleLineString",mixins:[require("../../mixins/field")],onChange:function onChange(event){this.onChangeValue(event.target.value)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{config:config,field:field,plain:this.props.plain},R.input({type:"text",value:this.props.field.value,className:cx(this.props.classes),onChange:this.onChange,onFocus:this.onFocusAction,onBlur:this.onBlurAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],15:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"String",mixins:[require("../../mixins/field")],onChange:function onChange(event){this.onChangeValue(event.target.value)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return config.createElement("field",{config:config,field:field,plain:this.props.plain},R.textarea({value:field.value,className:cx(this.props.classes),rows:field.rows||this.props.rows,onChange:this.onChange,onFocus:this.onFocusAction,onBlur:this.onBlurAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],16:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;module.exports=React.createClass({displayName:"Unknown",mixins:[require("../../mixins/field")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.div({},R.div({},"Component not found for: "),R.pre({},JSON.stringify(this.props.field.rawFieldTemplate,null,2)))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/field":43}],17:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"AddItem",mixins:[require("../../mixins/helper")],getDefaultProps:function getDefaultProps(){return{label:"[add]"}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.span({className:cx(this.props.classes),onClick:this.props.onClick},this.props.label)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],18:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ArrayControl",mixins:[require("../../mixins/helper")],getInitialState:function getInitialState(){return{fieldTemplateIndex:0}},onSelect:function onSelect(index){this.setState({fieldTemplateIndex:index})},onAppend:function onAppend(){this.props.onAppend(this.state.fieldTemplateIndex)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fieldTemplates=config.fieldItemFieldTemplates(field);var typeChoices=null;if(fieldTemplates.length>0){typeChoices=config.createElement("field-template-choices",{field:field,fieldTemplateIndex:this.state.fieldTemplateIndex,onSelect:this.onSelect})}return R.div({className:cx(this.props.classes)},typeChoices," ",config.createElement("add-item",{field:field,onClick:this.onAppend}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],19:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ArrayItemControl",mixins:[require("../../mixins/helper")],onMoveBack:function onMoveBack(){this.props.onMove(this.props.index,this.props.index-1)},onMoveForward:function onMoveForward(){this.props.onMove(this.props.index,this.props.index+1)},onRemove:function onRemove(){this.props.onRemove(this.props.index)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return R.div({className:cx(this.props.classes)},config.createElement("remove-item",{field:field,onClick:this.onRemove,onMaybeRemove:this.props.onMaybeRemove}),this.props.index>0?config.createElement("move-item-back",{field:field,onClick:this.onMoveBack}):null,this.props.index<this.props.numItems-1?config.createElement("move-item-forward",{field:field,onClick:this.onMoveForward}):null)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],20:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ArrayItemValue",mixins:[require("../../mixins/helper")],onChangeField:function onChangeField(newValue,info){this.props.onChange(this.props.index,newValue,info)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return R.div({className:cx(this.props.classes)},config.createFieldElement({field:field,onChange:this.onChangeField,onAction:this.onBubbleAction}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],21:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;module.exports=React.createClass({displayName:"ArrayItem",mixins:[require("../../mixins/helper")],getInitialState:function getInitialState(){return{isMaybeRemoving:false}},render:function render(){return this.renderWithConfig()},onMaybeRemove:function onMaybeRemove(isMaybeRemoving){
this.setState({isMaybeRemoving:isMaybeRemoving})},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var classes=_.extend({},this.props.classes);if(this.state.isMaybeRemoving){classes["maybe-removing"]=true}return R.div({className:cx(classes)},config.createElement("array-item-value",{field:field,index:this.props.index,onChange:this.props.onChange,onAction:this.onBubbleAction}),config.createElement("array-item-control",{field:field,index:this.props.index,numItems:this.props.numItems,onMove:this.props.onMove,onRemove:this.props.onRemove,onMaybeRemove:this.onMaybeRemove}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],22:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var CSSTransitionGroup=React.createFactory(React.addons.CSSTransitionGroup);module.exports=React.createClass({displayName:"Choices",mixins:[require("../../mixins/helper"),require("../../mixins/click-outside")],getInitialState:function getInitialState(){return{maxHeight:null,open:this.props.open}},getIgnoreCloseNodes:function getIgnoreCloseNodes(){if(!this.props.ignoreCloseNodes){return[]}var nodes=this.props.ignoreCloseNodes();if(!_.isArray(nodes)){nodes=[nodes]}return nodes},componentDidMount:function componentDidMount(){this.setOnClickOutside("choices",function(event){if(!_.find(this.getIgnoreCloseNodes(),function(node){return this.isNodeInside(event.target,node)}.bind(this))){this.props.onClose()}}.bind(this));this.adjustSize()},onSelect:function onSelect(choice){this.props.onSelect(choice.value)},onChoiceAction:function onChoiceAction(choice){this.props.onChoiceAction(choice)},onResizeWindow:function onResizeWindow(){this.adjustSize()},onScrollWindow:function onScrollWindow(){this.adjustSize()},adjustSize:function adjustSize(){if(this.refs.choices){var node=this.refs.choices.getDOMNode();var rect=node.getBoundingClientRect();var top=rect.top;var windowHeight=window.innerHeight;var height=windowHeight-top;this.setState({maxHeight:height})}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.setState({open:nextProps.open},function(){this.adjustSize()}.bind(this))},onScroll:function onScroll(){},onWheel:function onWheel(){},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var choices=this.props.choices;if(choices&&choices.length===0){choices=[{value:"///empty///"}]}if(this.props.open){return R.div({ref:"container",onWheel:this.onWheel,onScroll:this.onScroll,className:"choices-container",style:{userSelect:"none",WebkitUserSelect:"none",position:"absolute",maxHeight:this.state.maxHeight?this.state.maxHeight:null}},CSSTransitionGroup({transitionName:"reveal"},R.ul({ref:"choices",className:"choices"},choices.map(function(choice,i){var choiceElement=null;if(choice.value==="///loading///"){choiceElement=R.a({href:"JavaScript"+":",onClick:this.props.onClose},R.span({className:"choice-label"},"Loading..."))}else if(choice.value==="///empty///"){choiceElement=R.a({href:"JavaScript"+":",onClick:this.props.onClose},R.span({className:"choice-label"},"No choices available."))}else if(choice.action){choiceElement=R.a({href:"JavaScript"+":",onClick:this.onChoiceAction.bind(this,choice)},R.span({className:"choice-label"},this.props.config.actionChoiceLabel(choice.action)))}else{choiceElement=R.a({href:"JavaScript"+":",onClick:this.onSelect.bind(this,choice)},R.span({className:"choice-label"},choice.label),R.span({className:"choice-sample"},choice.sample))}return R.li({key:i,className:"choice"},choiceElement)}.bind(this)))))}return null}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/click-outside":42,"../../mixins/helper":44}],23:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"FieldTemplateChoices",mixins:[require("../../mixins/helper")],onChange:function onChange(event){this.props.onSelect(parseInt(event.target.value))},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fieldTemplates=config.fieldItemFieldTemplates(field);var typeChoices=null;if(fieldTemplates.length>1){typeChoices=R.select({className:cx(this.props.classes),value:this.fieldTemplateIndex,onChange:this.onChange},fieldTemplates.map(function(fieldTemplate,i){return R.option({key:i,value:i},fieldTemplate.label||i)}))}return typeChoices?typeChoices:R.span(null)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],24:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;var CSSTransitionGroup=React.createFactory(React.addons.CSSTransitionGroup);module.exports=React.createClass({displayName:"Field",mixins:[require("../../mixins/helper")],getInitialState:function getInitialState(){return{collapsed:this.props.config.fieldIsCollapsed(this.props.field)?true:false}},onClickLabel:function onClickLabel(){this.setState({collapsed:!this.state.collapsed})},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;if(this.props.plain){return this.props.children}var field=this.props.field;var index=this.props.index;if(!_.isNumber(index)){var key=this.props.field.key;index=_.isNumber(key)?key:undefined}var classes=_.extend({},this.props.classes);var errors=config.fieldErrors(field);errors.forEach(function(error){classes["validation-error-"+error.type]=true});if(config.fieldIsRequired(field)){classes.required=true}else{classes.optional=true}return R.div({className:cx(classes),style:{display:field.hidden?"none":""}},config.createElement("label",{config:config,field:field,index:index,onClick:config.fieldIsCollapsible(field)?this.onClickLabel:null}),CSSTransitionGroup({transitionName:"reveal"},this.state.collapsed?[]:[config.createElement("help",{config:config,field:field,key:"help"}),this.props.children]))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],25:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Help",mixins:[require("../../mixins/helper")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var helpText=this.props.config.fieldHelpText(this.props.field);return helpText?R.div({className:cx(this.props.classes),dangerouslySetInnerHTML:{__html:helpText}}):R.span(null)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],26:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({propTypes:{onClick:React.PropTypes.func.isRequired,ref:React.PropTypes.string},displayName:"InsertButton",mixins:[require("../../mixins/helper")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return React.createElement("a",{ref:this.props.ref,href:"JavaScript"+":",onClick:this.props.onClick},this.props.children)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],27:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Label",mixins:[require("../../mixins/helper")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fieldLabel=config.fieldLabel(field);var label=null;if(typeof this.props.index==="number"){label=""+(this.props.index+1)+".";if(fieldLabel){label=label+" "+fieldLabel}}if(fieldLabel||label){var text=label||fieldLabel;if(this.props.onClick){text=R.a({href:"JavaScript"+":",onClick:this.props.onClick},text)}label=R.label({},text)}var requiredOrNot;if(!config.fieldHasValueChildren(field)){requiredOrNot=R.span({className:config.fieldIsRequired(field)?"required-text":"not-required-text"})}return R.div({className:cx(this.props.classes)},label," ",requiredOrNot)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],28:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"MoveItemBack",mixins:[require("../../mixins/helper")],getDefaultProps:function getDefaultProps(){return{label:"[up]"}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.span({className:cx(this.props.classes),onClick:this.props.onClick},this.props.label)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],29:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"MoveItemForward",mixins:[require("../../mixins/helper")],getDefaultProps:function getDefaultProps(){return{label:"[down]"}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.span({className:cx(this.props.classes),onClick:this.props.onClick},this.props.label)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],30:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ObjectControl",mixins:[require("../../mixins/helper")],getInitialState:function getInitialState(){return{fieldTemplateIndex:0}},onSelect:function onSelect(index){this.setState({fieldTemplateIndex:index})},onAppend:function onAppend(){this.props.onAppend(this.state.fieldTemplateIndex)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;var fieldTemplates=config.fieldChildFieldTemplates(field);var typeChoices=null;if(fieldTemplates.length>0){typeChoices=config.createElement("field-template-choices",{field:field,fieldTemplateIndex:this.state.fieldTemplateIndex,onSelect:this.onSelect})}return R.div({className:cx(this.props.classes)},typeChoices," ",config.createElement("add-item",{onClick:this.onAppend}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],31:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ObjectItemControl",mixins:[require("../../mixins/helper")],onRemove:function onRemove(){this.props.onRemove(this.props.itemKey)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return R.div({className:cx(this.props.classes)},config.createElement("remove-item",{field:field,onClick:this.onRemove}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],32:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ObjectItemKey",mixins:[require("../../mixins/helper")],onChange:function onChange(event){this.props.onChange(event.target.value)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){return R.input({className:cx(this.props.classes),type:"text",value:this.props.displayKey,onChange:this.onChange})}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],33:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ObjectItemValue",mixins:[require("../../mixins/helper")],onChangeField:function onChangeField(newValue,info){this.props.onChange(this.props.itemKey,newValue,info)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return R.div({className:cx(this.props.classes)},config.createFieldElement({field:field,onChange:this.onChangeField,plain:true}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],34:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"ObjectItem",mixins:[require("../../mixins/helper")],onChangeKey:function onChangeKey(newKey){this.props.onMove(this.props.itemKey,newKey)},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var config=this.props.config;var field=this.props.field;return R.div({className:cx(this.props.classes)},config.createElement("object-item-key",{field:field,onChange:this.onChangeKey,displayKey:this.props.displayKey,itemKey:this.props.itemKey}),config.createElement("object-item-value",{field:field,onChange:this.props.onChange,itemKey:this.props.itemKey}),config.createElement("object-item-control",{field:field,onRemove:this.props.onRemove,itemKey:this.props.itemKey}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],35:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"SelectValue",mixins:[require("../../mixins/helper")],onChange:function onChange(event){var choiceValue=event.target.value;var choiceType=choiceValue.substring(0,choiceValue.indexOf(":"));if(choiceType==="choice"){var choiceIndex=choiceValue.substring(choiceValue.indexOf(":")+1);choiceIndex=parseInt(choiceIndex);this.props.onChange(this.props.choices[choiceIndex].value)}},getDefaultProps:function getDefaultProps(){return{choices:[]}},getInitialState:function getInitialState(){var defaultValue=this.props.field.value!==undefined?this.props.field.value:"";return{isChoicesOpen:this.props.isChoicesOpen,value:defaultValue}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var choices=this.props.config.normalizePrettyChoices(this.props.choices);var choicesOrLoading;if(choices.length===1&&choices[0].value==="///loading///"){choicesOrLoading=React.createElement("div",null,"'Loading choices...'")}else{var choicesElem=this.props.config.createElement("choices",{ref:"choices",choices:choices,open:this.state.isChoicesOpen,ignoreCloseNodes:this.getCloseIgnoreNodes,onSelect:this.onSelectChoice,onClose:this.onCloseChoices,onChoiceAction:this.onChoiceAction});choicesOrLoading=React.createElement("div",{className:cx(this.props.classes),onChange:this.onChange,onFocus:this.onFocusAction,onBlur:this.onBlurAction},React.createElement("div",{ref:"toggle",onClick:this.onToggleChoices},React.createElement("input",{type:"text",value:this.getDisplayValue(),readOnly:true}),React.createElement("span",{className:"select-arrow"})),choicesElem)}return choicesOrLoading},getCloseIgnoreNodes:function getCloseIgnoreNodes(){return this.refs.toggle.getDOMNode()},onToggleChoices:function onToggleChoices(){this.setChoicesOpen(!this.state.isChoicesOpen)},setChoicesOpen:function setChoicesOpen(isOpen){var action=isOpen?"open-replacements":"close-replacements";this.onStartAction(action);this.setState({isChoicesOpen:isOpen})},onSelectChoice:function onSelectChoice(value){this.setState({isChoicesOpen:false,value:value});this.props.onChange(value)},onCloseChoices:function onCloseChoices(){if(this.state.isChoicesOpen){this.setChoicesOpen(false)}},getDisplayValue:function getDisplayValue(){var currentValue=this.state.value;var currentChoice=_.find(this.props.choices,function(choice){return choice.value===currentValue});return currentChoice?currentChoice.label:""},onChoiceAction:function onChoiceAction(choice){this.setState({isChoicesOpen:false,value:choice.value});this.onStartAction(choice.action,choice)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],36:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"RemoveItem",mixins:[require("../../mixins/helper")],getDefaultProps:function getDefaultProps(){return{label:"[remove]"}},render:function render(){return this.renderWithConfig()},onMouseOverRemove:function onMouseOverRemove(){if(this.props.onMaybeRemove){this.props.onMaybeRemove(true)}},onMouseOutRemove:function onMouseOutRemove(){if(this.props.onMaybeRemove){this.props.onMaybeRemove(false)}},renderDefault:function renderDefault(){return R.span({className:cx(this.props.classes),onClick:this.props.onClick,onMouseOver:this.onMouseOverRemove,onMouseOut:this.onMouseOutRemove},this.props.label)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],37:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"Sample",mixins:[require("../../mixins/helper")],render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var choice=this.props.choice;return choice.sample?R.div({className:cx(this.props.className)},choice.sample):R.span(null)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],38:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var cx=React.addons.classSet;module.exports=React.createClass({displayName:"SelectValue",mixins:[require("../../mixins/helper")],onChange:function onChange(event){var choiceValue=event.target.value;var choiceType=choiceValue.substring(0,choiceValue.indexOf(":"));if(choiceType==="choice"){var choiceIndex=choiceValue.substring(choiceValue.indexOf(":")+1);choiceIndex=parseInt(choiceIndex);this.props.onChange(this.props.choices[choiceIndex].value)}},render:function render(){return this.renderWithConfig()},renderDefault:function renderDefault(){var choices=this.props.choices||[];var choicesOrLoading;if(choices.length===1&&choices[0].value==="///loading///"){choicesOrLoading=R.div({},"Loading choices...")}else{var value=this.props.field.value!==undefined?this.props.field.value:"";choices=choices.map(function(choice,i){return{choiceValue:"choice:"+i,value:choice.value,label:choice.label}});var valueChoice=_.find(choices,function(choice){return choice.value===value});if(valueChoice===undefined){var label=value;if(!_.isString(value)){label=JSON.stringify(value)}valueChoice={choiceValue:"value:",value:value,label:label};choices=[valueChoice].concat(choices)}choicesOrLoading=R.select({className:cx(this.props.classes),onChange:this.onChange,value:valueChoice.choiceValue,onFocus:this.onFocusAction,onBlur:this.onBlurAction},choices.map(function(choice,i){return R.option({key:i,value:choice.choiceValue},choice.label)}))}return choicesOrLoading}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../mixins/helper":44}],39:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var FIRST_SPECIAL_CHAR=57344;var TAGS_REGEXP=/\{\{(.+?)\}\}/g;function removeIdPrefix(key){return String(key).replace(/^[0-9]+__/,"")}function buildChoicesMap(replaceChoices){var choices={};replaceChoices.forEach(function(choice){var key=removeIdPrefix(choice.value);choices[key]=choice.label});return choices}function TagTranslator(replaceChoices,humanize){var nextCharCode=FIRST_SPECIAL_CHAR;var choices={};var charToTagMap={};var tagToCharMap={};function addChoices(choicesArray){choices=buildChoicesMap(choicesArray);Object.keys(choices).sort().forEach(function(tag){if(tagToCharMap[tag]){return}var char=String.fromCharCode(nextCharCode++);charToTagMap[char]=tag;tagToCharMap[tag]=char})}addChoices(replaceChoices);return{specialCharsRegexp:/[\ue000-\uefff]/g,addChoices:addChoices,encodeTag:function encodeTag(tag){tag=removeIdPrefix(tag);if(!tagToCharMap[tag]){var char=String.fromCharCode(nextCharCode++);tagToCharMap[tag]=char;charToTagMap[char]=tag}return tagToCharMap[tag]},encodeValue:function encodeValue(value){return String(value).replace(TAGS_REGEXP,function(m,tag){tag=removeIdPrefix(tag);return this.encodeTag(tag)}.bind(this))},decodeValue:function decodeValue(encodedValue){return String(encodedValue).replace(this.specialCharsRegexp,function(c){var tag=charToTagMap[c];return"{{"+tag+"}}"})},decodeChar:function decodeChar(char){var tag=charToTagMap[char];return this.getLabel(tag)},toHtml:function toHtml(value){return String(value).replace(TAGS_REGEXP,function(m,mustache){var tag=mustache.replace("{{","").replace("}}","");tag=removeIdPrefix(tag);var label=this.getLabel(tag);return'<span class="pretty-part">'+label+"</span>"}.bind(this))},getLabel:function getLabel(tag){tag=removeIdPrefix(tag);var label=choices[tag];if(!label){label=humanize&&humanize(tag)||tag}return label}}}module.exports=TagTranslator}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],40:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var R=React.DOM;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var utils=require("./utils");module.exports=function(config){var delegateTo=utils.delegator(config);return{createElement_Fields:React.createFactory(require("./components/fields/fields")),createElement_String:React.createFactory(require("./components/fields/string")),createElement_SingleLineString:React.createFactory(require("./components/fields/single-line-string")),createElement_Select:React.createFactory(require("./components/fields/select")),createElement_PrettySelect:React.createFactory(require("./components/fields/pretty-select")),createElement_Boolean:React.createFactory(require("./components/fields/boolean")),createElement_PrettyBoolean:React.createFactory(require("./components/fields/pretty-boolean")),createElement_CheckboxBoolean:React.createFactory(require("./components/fields/checkbox-boolean")),createElement_PrettyText:React.createFactory(require("./components/fields/pretty-text2")),createElement_Array:React.createFactory(require("./components/fields/array")),createElement_CheckboxArray:React.createFactory(require("./components/fields/checkbox-array")),createElement_Object:React.createFactory(require("./components/fields/object")),createElement_Json:React.createFactory(require("./components/fields/json")),createElement_UnknownField:React.createFactory(require("./components/fields/unknown")),createElement_Copy:React.createFactory(require("./components/fields/copy")),createElement_Field:React.createFactory(require("./components/helpers/field")),createElement_Label:React.createFactory(require("./components/helpers/label")),createElement_Help:React.createFactory(require("./components/helpers/help")),createElement_Choices:React.createFactory(require("./components/helpers/choices")),createElement_ArrayControl:React.createFactory(require("./components/helpers/array-control")),createElement_ArrayItemControl:React.createFactory(require("./components/helpers/array-item-control")),createElement_ArrayItemValue:React.createFactory(require("./components/helpers/array-item-value")),createElement_ArrayItem:React.createFactory(require("./components/helpers/array-item")),createElement_FieldTemplateChoices:React.createFactory(require("./components/helpers/field-template-choices")),createElement_AddItem:React.createFactory(require("./components/helpers/add-item")),createElement_RemoveItem:React.createFactory(require("./components/helpers/remove-item")),createElement_MoveItemForward:React.createFactory(require("./components/helpers/move-item-forward")),createElement_MoveItemBack:React.createFactory(require("./components/helpers/move-item-back")),createElement_ObjectControl:React.createFactory(require("./components/helpers/object-control")),createElement_ObjectItemControl:React.createFactory(require("./components/helpers/object-item-control")),createElement_ObjectItemValue:React.createFactory(require("./components/helpers/object-item-value")),createElement_ObjectItemKey:React.createFactory(require("./components/helpers/object-item-key")),createElement_ObjectItem:React.createFactory(require("./components/helpers/object-item")),createElement_SelectValue:React.createFactory(require("./components/helpers/select-value")),createElement_PrettySelectValue:React.createFactory(require("./components/helpers/pretty-select-value")),createElement_Sample:React.createFactory(require("./components/helpers/sample")),createElement_InsertButton:React.createFactory(require("./components/helpers/insert-button")),createDefaultValue_String:function createDefaultValue_String(){return""},createDefaultValue_Object:function createDefaultValue_Object(){return{}},createDefaultValue_Array:function createDefaultValue_Array(){return[]},createDefaultValue_Boolean:function createDefaultValue_Boolean(){return false},createDefaultValue_Fields:delegateTo("createDefaultValue_Object"),createDefaultValue_SingleLineString:delegateTo("createDefaultValue_String"),createDefaultValue_Select:delegateTo("createDefaultValue_String"),createDefaultValue_Json:delegateTo("createDefaultValue_Object"),createDefaultValue_CheckboxArray:delegateTo("createDefaultValue_Array"),createDefaultValue_CheckboxBoolean:delegateTo("createDefaultValue_Boolean"),coerceValue_String:function coerceValue_String(fieldTemplate,value){if(_.isString(value)){return value}if(_.isUndefined(value)||value===null){return""}return JSON.stringify(value)},coerceValue_Object:function coerceValue_Object(fieldTemplate,value){if(!_.isObject(value)){return{}}return value},coerceValue_Array:function coerceValue_Array(fieldTemplate,value){if(!_.isArray(value)){return[value]}return value},coerceValue_Boolean:function coerceValue_Boolean(fieldTemplate,value){return config.coerceValueToBoolean(value)},coerceValue_Fields:delegateTo("coerceValue_Object"),coerceValue_SingleLineString:delegateTo("coerceValue_String"),coerceValue_Select:delegateTo("coerceValue_String"),coerceValue_Json:delegateTo("coerceValue_Object"),coerceValue_CheckboxArray:delegateTo("coerceValue_Array"),coerceValue_CheckboxBoolean:delegateTo("coerceValue_Boolean"),createChildFields_Array:function createChildFields_Array(field){return field.value.map(function(arrayItem,i){var childFieldTemplate=config.childFieldTemplateForValue(field,arrayItem);var childField=config.createChildField(field,{fieldTemplate:childFieldTemplate,key:i,fieldIndex:i,value:arrayItem});return childField})},createChildFields_Object:function createChildFields_Object(field){return Object.keys(field.value).map(function(key,i){var childFieldTemplate=config.childFieldTemplateForValue(field,field.value[key]);var childField=config.createChildField(field,{fieldTemplate:childFieldTemplate,key:key,fieldIndex:i,value:field.value[key]});return childField})},hasElementFactory:function hasElementFactory(name){return config["createElement_"+name]?true:false},createElement:function createElement(name,props,children){if(!props.config){props=_.extend({},props,{config:config})}name=config.elementName(name);if(config["createElement_"+name]){return config["createElement_"+name](props,children)}if(name!=="Unknown"){if(config.hasElementFactory("Unknown")){return config.createElement("Unknown",props,children)}}throw new Error("Factory not found for: "+name)},createFieldElement:function createFieldElement(props){var name=config.fieldTypeName(props.field);if(config.hasElementFactory(name)){return config.createElement(name,props)}return config.createElement("UnknownField",props)},renderFormaticComponent:function renderFormaticComponent(component){var props=component.props;var field=config.createRootField(props);return R.div({className:"formatic"},config.createFieldElement({field:field,onChange:component.onChange,onAction:component.onAction}))},renderComponent:function renderComponent(component){var name=component.constructor.displayName;if(config["renderComponent_"+name]){return config["renderComponent_"+name](component)}return component.renderDefault()},renderFieldComponent:function renderFieldComponent(component){return config.renderComponent(component)},elementName:function elementName(name){return utils.dashToPascal(name)},alias_Dict:"Object",alias_Bool:"Boolean",alias_PrettyTextarea:"PrettyText",alias_SingleLineString:function alias_SingleLineString(fieldTemplate){if(fieldTemplate.replaceChoices){return"PrettyText"}else if(fieldTemplate.choices){return"Select"}return"SingleLineString"},alias_String:function alias_String(fieldTemplate){if(fieldTemplate.replaceChoices){
return"PrettyText"}else if(fieldTemplate.choices){return"Select"}else if(config.fieldTemplateIsSingleLine(fieldTemplate)){return"SingleLineString"}return"String"},alias_Text:delegateTo("alias_String"),alias_Unicode:delegateTo("alias_SingleLineString"),alias_Str:delegateTo("alias_SingleLineString"),alias_List:"Array",alias_CheckboxList:"CheckboxArray",alias_Fieldset:"Fields",alias_Checkbox:"CheckboxBoolean",inflateFieldValue:function inflateFieldValue(field,fieldHandler){if(fieldHandler){var stop=fieldHandler(field);if(stop===false){return undefined}}if(config.fieldHasValueChildren(field)){var value=_.clone(field.value);var childFields=config.createChildFields(field);childFields.forEach(function(childField){if(config.isKey(childField.key)){value[childField.key]=config.inflateFieldValue(childField,fieldHandler)}});return value}else{return field.value}},initRootField:function initRootField(){},initField:function initField(){},wrapFieldTemplates:function wrapFieldTemplates(fieldTemplates){return{type:"fields",plain:true,fields:fieldTemplates}},createRootField:function createRootField(props){var fieldTemplate=props.fieldTemplate||props.fieldTemplates||props.field||props.fields;var value=props.value;if(!fieldTemplate){fieldTemplate=config.createFieldTemplateFromValue(value)}if(_.isArray(fieldTemplate)){fieldTemplate=config.wrapFieldTemplates(fieldTemplate)}var field=_.extend({},fieldTemplate,{rawFieldTemplate:fieldTemplate});if(config.hasValue(fieldTemplate,value)){field.value=config.coerceValue(fieldTemplate,value)}else{field.value=config.createDefaultValue(fieldTemplate)}config.initRootField(field,props);config.initField(field);if(value===null||config.isEmptyObject(value)||_.isUndefined(value)){field.value=config.inflateFieldValue(field)}return field},createRootValue:function createRootValue(props,fieldHandler){var field=config.createRootField(props);return config.inflateFieldValue(field,fieldHandler)},validateRootValue:function validateRootValue(props){var errors=[];config.createRootValue(props,function(field){var fieldErrors=config.fieldErrors(field);if(fieldErrors.length>0){errors.push({path:config.fieldValuePath(field),errors:fieldErrors})}});return errors},isValidRootValue:function isValidRootValue(props){var isValid=true;config.createRootValue(props,function(field){if(config.fieldErrors(field).length>0){isValid=false;return false}});return isValid},validateField:function validateField(field,errors){if(field.value===undefined||field.value===""){if(config.fieldIsRequired(field)){errors.push({type:"required"})}}},createChildFields:function createChildFields(field){var typeName=config.fieldTypeName(field);if(config["createChildFields_"+typeName]){return config["createChildFields_"+typeName](field)}return config.fieldChildFieldTemplates(field).map(function(childField,i){return config.createChildField(field,{fieldTemplate:childField,key:childField.key,fieldIndex:i,value:field.value[childField.key]})})},createChildField:function createChildField(parentField,options){var childValue=options.value;var childField=_.extend({},options.fieldTemplate,{key:options.key,parent:parentField,fieldIndex:options.fieldIndex,rawFieldTemplate:options.fieldTemplate});if(config.hasValue(options.fieldTemplate,childValue)){childField.value=config.coerceValue(options.fieldTemplate,childValue)}else{childField.value=config.createDefaultValue(options.fieldTemplate)}config.initField(childField);return childField},createNewChildFieldValue:function createNewChildFieldValue(parentField,itemFieldIndex){var childFieldTemplate=config.fieldItemFieldTemplates(parentField)[itemFieldIndex];var newValue=config.fieldTemplateValue(childFieldTemplate);var key="__unknown_key__";if(_.isArray(parentField.value)){key=parentField.value.length}var fieldIndex=0;if(_.isObject(parentField.value)){fieldIndex=Object.keys(parentField.value).length}var childField=config.createChildField(parentField,{fieldTemplate:childFieldTemplate,key:key,fieldIndex:fieldIndex,value:newValue});newValue=config.inflateFieldValue(childField);return newValue},createFieldTemplateFromValue:function createFieldTemplateFromValue(value){var field={type:"json"};if(_.isString(value)){field={type:"string"}}else if(_.isNumber(value)){field={type:"number"}}else if(_.isBoolean(value)){field={type:"boolean"}}else if(_.isArray(value)){var arrayItemFields=value.map(function(childValue,i){var childField=config.createFieldTemplateFromValue(childValue);childField.key=i;return childField});field={type:"array",fields:arrayItemFields}}else if(_.isObject(value)){var objectItemFields=Object.keys(value).map(function(key){var childField=config.createFieldTemplateFromValue(value[key]);childField.key=key;childField.label=config.humanize(key);return childField});field={type:"object",fields:objectItemFields}}else if(_.isNull(value)){field={type:"json"}}return field},createDefaultValue:function createDefaultValue(fieldTemplate){var defaultValue=config.fieldTemplateDefaultValue(fieldTemplate);if(!_.isUndefined(defaultValue)){return utils.deepCopy(defaultValue)}var typeName=config.fieldTypeName(fieldTemplate);if(config["createDefaultValue_"+typeName]){return config["createDefaultValue_"+typeName](fieldTemplate)}return""},hasValue:function hasValue(fieldTemplate,value){return value!==null&&!_.isUndefined(value)},coerceValue:function coerceValue(field,value){var typeName=config.fieldTypeName(field);if(config["coerceValue_"+typeName]){return config["coerceValue_"+typeName](field,value)}return value},childFieldTemplateForValue:function childFieldTemplateForValue(field,childValue){var fieldTemplate;var fieldTemplates=config.fieldItemFieldTemplates(field);fieldTemplate=_.find(fieldTemplates,function(itemFieldTemplate){return config.matchesFieldTemplateToValue(itemFieldTemplate,childValue)});if(fieldTemplate){return fieldTemplate}else{return config.createFieldTemplateFromValue(childValue)}},matchesFieldTemplateToValue:function matchesFieldTemplateToValue(fieldTemplate,value){var match=fieldTemplate.match;if(!match){return true}return _.every(_.keys(match),function(key){return _.isEqual(match[key],value[key])})},fieldTemplateTypeName:function fieldTemplateTypeName(fieldTemplate){var typeName=utils.dashToPascal(fieldTemplate.type||"undefined");var alias=config["alias_"+typeName];if(alias){if(_.isFunction(alias)){return alias.call(config,fieldTemplate)}else{return alias}}if(fieldTemplate.list){typeName="Array"}return typeName},fieldTemplateDefaultValue:function fieldTemplateDefaultValue(fieldTemplate){return fieldTemplate["default"]},fieldTemplateValue:function fieldTemplateValue(fieldTemplate){var defaultValue=config.fieldTemplateDefaultValue(fieldTemplate);var match=config.fieldTemplateMatch(fieldTemplate);var value;if(_.isUndefined(defaultValue)&&!_.isUndefined(match)){return utils.deepCopy(match)}else{return config.createDefaultValue(fieldTemplate)}return value},fieldTemplateMatch:function fieldTemplateMatch(fieldTemplate){return fieldTemplate.match},fieldTemplateIsSingleLine:function fieldTemplateIsSingleLine(fieldTemplate){return fieldTemplate.isSingleLine||fieldTemplate.is_single_line||fieldTemplate.type==="single-line-string"||fieldTemplate.type==="SingleLineString"},fieldValuePath:function fieldValuePath(field){var parentPath=[];if(field.parent){parentPath=config.fieldValuePath(field.parent)}return parentPath.concat(field.key).filter(function(key){return!_.isUndefined(key)&&key!==""})},fieldWithValue:function fieldWithValue(field,value){return _.extend({},field,{value:value})},fieldTypeName:delegateTo("fieldTemplateTypeName"),fieldChoices:function fieldChoices(field){return config.normalizeChoices(field.choices)},fieldPrettyChoices:function fieldPrettyChoices(field){return config.normalizePrettyChoices(field.choices)},fieldBooleanChoices:function fieldBooleanChoices(field){var choices=config.fieldChoices(field);if(choices.length===0){return[{label:"yes",value:true},{label:"no",value:false}]}return choices.map(function(choice){if(_.isBoolean(choice.value)){return choice}return _.extend({},choice,{value:config.coerceValueToBoolean(choice.value)})})},fieldReplaceChoices:function fieldReplaceChoices(field){return config.normalizeChoices(field.replaceChoices)},fieldLabel:function fieldLabel(field){return field.label},fieldHelpText:function fieldHelpText(field){return field.help_text_html||field.help_text||field.helpText||field.helpTextHtml},fieldIsRequired:function fieldIsRequired(field){return field.required?true:false},fieldHasValueChildren:function fieldHasValueChildren(field){var defaultValue=config.createDefaultValue(field);if(_.isObject(defaultValue)||_.isArray(defaultValue)){return true}return false},fieldChildFieldTemplates:function fieldChildFieldTemplates(field){return field.fields||[]},fieldItemFieldTemplates:function fieldItemFieldTemplates(field){if(!field.itemFields){return[{type:"text"}]}if(!_.isArray(field.itemFields)){return[field.itemFields]}return field.itemFields},fieldIsSingleLine:delegateTo("fieldTemplateIsSingleLine"),fieldIsCollapsed:function fieldIsCollapsed(field){return field.collapsed?true:false},fieldIsCollapsible:function fieldIsCollapsible(field){return field.collapsible||!_.isUndefined(field.collapsed)},fieldRows:function fieldRows(field){return field.rows},fieldErrors:function fieldErrors(field){var errors=[];if(config.isKey(field.key)){config.validateField(field,errors)}return errors},fieldMatch:delegateTo("fieldTemplateMatch"),humanize:function humanize(property){property=property.replace(/\{\{/g,"");property=property.replace(/\}\}/g,"");return property.replace(/_/g," ").replace(/(\w+)/g,function(match){return match.charAt(0).toUpperCase()+match.slice(1)})},normalizeChoices:function normalizeChoices(choices){if(!choices){return[]}if(_.isString(choices)){choices=choices.split(",")}if(!_.isArray(choices)&&_.isObject(choices)){choices=Object.keys(choices).map(function(key){return{value:key,label:choices[key]}})}choices=choices.slice(0);choices=_.flatten(choices);choices.forEach(function(choice,i){if(_.isString(choice)){choices[i]={value:choice,label:config.humanize(choice)}}if(!choices[i].label){choices[i].label=config.humanize(choices[i].value)}});return choices},normalizePrettyChoices:function normalizePrettyChoices(choices){if(!_.isArray(choices)&&_.isObject(choices)){choices=Object.keys(choices).map(function(key){return{value:key,label:choices[key],sample:key}})}return this.normalizeChoices(choices)},coerceValueToBoolean:function coerceValueToBoolean(value){if(!_.isString(value)){return value?true:false}value=value.toLowerCase();if(value===""||value==="no"||value==="off"||value==="false"){return false}return true},isKey:function isKey(key){return _.isNumber(key)&&key>=0||_.isString(key)&&key!==""},isEmptyObject:function isEmptyObject(obj){for(var key in obj){if(obj.hasOwnProperty(key)){return false}}return true},actionChoiceLabel:function actionChoiceLabel(action){return utils.capitalize(action).replace(/[-]/g," ")}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./components/fields/array":2,"./components/fields/boolean":3,"./components/fields/checkbox-array":4,"./components/fields/checkbox-boolean":5,"./components/fields/copy":6,"./components/fields/fields":7,"./components/fields/json":8,"./components/fields/object":9,"./components/fields/pretty-boolean":10,"./components/fields/pretty-select":11,"./components/fields/pretty-text2":12,"./components/fields/select":13,"./components/fields/single-line-string":14,"./components/fields/string":15,"./components/fields/unknown":16,"./components/helpers/add-item":17,"./components/helpers/array-control":18,"./components/helpers/array-item":21,"./components/helpers/array-item-control":19,"./components/helpers/array-item-value":20,"./components/helpers/choices":22,"./components/helpers/field":24,"./components/helpers/field-template-choices":23,"./components/helpers/help":25,"./components/helpers/insert-button":26,"./components/helpers/label":27,"./components/helpers/move-item-back":28,"./components/helpers/move-item-forward":29,"./components/helpers/object-control":30,"./components/helpers/object-item":34,"./components/helpers/object-item-control":31,"./components/helpers/object-item-key":32,"./components/helpers/object-item-value":33,"./components/helpers/pretty-select-value":35,"./components/helpers/remove-item":36,"./components/helpers/sample":37,"./components/helpers/select-value":38,"./utils":52}],41:[function(require,module,exports){(function(global){"use strict";var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var utils=require("./utils");var defaultConfigPlugin=require("./default-config");var createConfig=function createConfig(){var plugins=[defaultConfigPlugin].concat(_.toArray(arguments));return plugins.reduce(function(config,plugin){if(_.isFunction(plugin)){var extensions=plugin(config);if(extensions){_.extend(config,extensions)}}else{_.extend(config,plugin)}return config},{})};var defaultConfig=createConfig();var FormaticControlledClass=React.createClass({displayName:"FormaticControlled",onChange:function onChange(newValue,info){if(!this.props.onChange){return}info=_.extend({},info);info.path=this.props.config.fieldValuePath(info.field);this.props.onChange(newValue,info)},onAction:function onAction(info){if(!this.props.onAction){return}info=_.extend({},info);info.path=this.props.config.fieldValuePath(info.field);this.props.onAction(info)},render:function render(){var config=this.props.config;return config.renderFormaticComponent(this)}});var FormaticControlled=React.createFactory(FormaticControlledClass);module.exports=React.createClass({statics:{createConfig:createConfig,availableMixins:{clickOutside:require("./mixins/click-outside.js"),field:require("./mixins/field.js"),helper:require("./mixins/helper.js"),resize:require("./mixins/resize.js"),scroll:require("./mixins/scroll.js"),undoStack:require("./mixins/undo-stack.js")},plugins:{bootstrap:require("./plugins/bootstrap"),meta:require("./plugins/meta"),reference:require("./plugins/reference"),elementClasses:require("./plugins/element-classes")},utils:utils},displayName:"Formatic",getInitialState:function getInitialState(){return{isControlled:!_.isUndefined(this.props.value),value:_.isUndefined(this.props.value)?this.props.defaultValue:this.props.value}},componentWillReceiveProps:function componentWillReceiveProps(newProps){if(this.state.isControlled){if(!_.isUndefined(newProps.value)){this.setState({value:newProps.value})}}},onChange:function onChange(newValue,info){if(!this.state.isControlled){this.setState({value:newValue})}if(!this.props.onChange){return}this.props.onChange(newValue,info)},onAction:function onAction(info){if(this.props.onAction){this.props.onAction(info)}var action=utils.dashToPascal(info.action);if(this.props["on"+action]){this.props["on"+action](info)}},render:function render(){var config=this.props.config||defaultConfig;var value=this.state.value;if(this.state.isControlled){if(!this.props.onChange){console.log("You should supply an onChange handler if you supply a value.")}}var props={config:config,fieldTemplate:this.props.field,fieldTemplates:this.props.fields,value:value,onChange:this.onChange,onAction:this.onAction};_.each(this.props,function(propValue,key){if(!(key in props)){props[key]=propValue}});return FormaticControlled(props)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./default-config":40,"./mixins/click-outside.js":42,"./mixins/field.js":43,"./mixins/helper.js":44,"./mixins/resize.js":45,"./mixins/scroll.js":46,"./mixins/undo-stack.js":47,"./plugins/bootstrap":48,"./plugins/element-classes":49,"./plugins/meta":50,"./plugins/reference":51,"./utils":52}],42:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var hasAncestor=function(_hasAncestor){var _hasAncestorWrapper=function hasAncestor(_x,_x2){return _hasAncestor.apply(this,arguments)};_hasAncestorWrapper.toString=function(){return _hasAncestor.toString()};return _hasAncestorWrapper}(function(child,parent){if(child.parentNode===parent){return true}if(child.parentNode===null){return false}return hasAncestor(child.parentNode,parent)});module.exports={isNodeOutside:function isNodeOutside(nodeOut,nodeIn){if(nodeOut===nodeIn){return false}if(hasAncestor(nodeOut,nodeIn)){return false}return true},isNodeInside:function isNodeInside(nodeIn,nodeOut){return!this.isNodeOutside(nodeIn,nodeOut)},_onClickMousedown:function _onClickMousedown(){_.each(this.clickOutsideHandlers,function(funcs,ref){if(this.refs[ref]){this._mousedownRefs[ref]=true}}.bind(this))},_onClickMouseup:function _onClickMouseup(event){_.each(this.clickOutsideHandlers,function(funcs,ref){if(this.refs[ref]&&this._mousedownRefs[ref]){if(this.isNodeOutside(event.target,this.refs[ref].getDOMNode())){funcs.forEach(function(fn){fn.call(this,event)}.bind(this))}}this._mousedownRefs[ref]=false}.bind(this))},setOnClickOutside:function setOnClickOutside(ref,fn){if(!this.clickOutsideHandlers[ref]){this.clickOutsideHandlers[ref]=[]}this.clickOutsideHandlers[ref].push(fn)},componentDidMount:function componentDidMount(){this.clickOutsideHandlers={};this._didMouseDown=false;document.addEventListener("mousedown",this._onClickMousedown);document.addEventListener("mouseup",this._onClickMouseup);this._mousedownRefs={}},componentWillUnmount:function componentWillUnmount(){this.clickOutsideHandlers={};document.removeEventListener("mouseup",this._onClickMouseup);document.removeEventListener("mousedown",this._onClickMousedown)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],43:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;module.exports={onChangeValue:function onChangeValue(value){this.props.onChange(value,{field:this.props.field})},onBubbleValue:function onBubbleValue(value,info){this.props.onChange(value,info)},onStartAction:function onStartAction(action,props){if(this.props.onAction){var info=_.extend({},props);info.action=action;info.field=this.props.field;this.props.onAction(info)}},onFocusAction:function onFocusAction(){this.onStartAction("focus")},onBlurAction:function onBlurAction(){this.onStartAction("blur")},onBubbleAction:function onBubbleAction(info){if(this.props.onAction){this.props.onAction(info)}},renderWithConfig:function renderWithConfig(){return this.props.config.renderFieldComponent(this)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],44:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;module.exports={renderWithConfig:function renderWithConfig(){return this.props.config.renderComponent(this)},onStartAction:function onStartAction(action,props){if(this.props.onAction){var info=_.extend({},props);info.action=action;info.field=this.props.field;this.props.onAction(info)}},onBubbleAction:function onBubbleAction(info){if(this.props.onAction){this.props.onAction(info)}},onFocusAction:function onFocusAction(){this.onStartAction("focus")},onBlurAction:function onBlurAction(){this.onStartAction("blur")}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],45:[function(require,module,exports){"use strict";var id=0;var resizeIntervalElements={};var resizeIntervalElementsCount=0;var resizeIntervalTimer=null;var checkElements=function checkElements(){Object.keys(resizeIntervalElements).forEach(function(key){var element=resizeIntervalElements[key];if(element.clientWidth!==element.__prevClientWidth||element.clientHeight!==element.__prevClientHeight){element.__prevClientWidth=element.clientWidth;element.__prevClientHeight=element.clientHeight;var handlers=element.__resizeHandlers;handlers.forEach(function(handler){handler()})}},100)};var addResizeIntervalHandler=function addResizeIntervalHandler(element,fn){if(resizeIntervalTimer===null){resizeIntervalTimer=setInterval(checkElements,100)}if(!("__resizeId"in element)){id++;element.__prevClientWidth=element.clientWidth;element.__prevClientHeight=element.clientHeight;element.__resizeId=id;resizeIntervalElementsCount++;resizeIntervalElements[id]=element;element.__resizeHandlers=[]}element.__resizeHandlers.push(fn)};var removeResizeIntervalHandlers=function removeResizeIntervalHandlers(element){if(!("__resizeId"in element)){return}var resizeId=element.__resizeId;delete element.__resizeId;delete element.__resizeHandlers;delete resizeIntervalElements[resizeId];resizeIntervalElementsCount--;if(resizeIntervalElementsCount<1){clearInterval(resizeIntervalTimer);resizeIntervalTimer=null}};var onResize=function onResize(ref,fn){fn(ref)};module.exports={componentDidMount:function componentDidMount(){if(this.onResizeWindow){window.addEventListener("resize",this.onResizeWindow)}this.resizeElementRefs={}},componentWillUnmount:function componentWillUnmount(){if(this.onResizeWindow){window.removeEventListener("resize",this.onResizeWindow)}Object.keys(this.resizeElementRefs).forEach(function(ref){removeResizeIntervalHandlers(this.refs[ref].getDOMNode())}.bind(this))},setOnResize:function setOnResize(ref,fn){if(!this.resizeElementRefs[ref]){this.resizeElementRefs[ref]=true}addResizeIntervalHandler(this.refs[ref].getDOMNode(),onResize.bind(this,ref,fn))}}},{}],46:[function(require,module,exports){"use strict";module.exports=function(plugin){plugin.exports={componentDidMount:function componentDidMount(){if(this.onScrollWindow){window.addEventListener("scroll",this.onScrollWindow)}},componentWillUnmount:function componentWillUnmount(){if(this.onScrollWindow){window.removeEventListener("scroll",this.onScrollWindow)}}}}},{}],47:[function(require,module,exports){"use strict";module.exports={getInitialState:function getInitialState(){return{undo:[],redo:[]}},snapshot:function snapshot(){var undo=this.state.undo.concat(this.getStateSnapshot());if(typeof this.state.undoDepth==="number"){if(undo.length>this.state.undoDepth){undo.shift()}}this.setState({undo:undo,redo:[]})},hasUndo:function hasUndo(){return this.state.undo.length>0},hasRedo:function hasRedo(){return this.state.redo.length>0},redo:function redo(){this._undoImpl(true)},undo:function undo(){this._undoImpl()},_undoImpl:function _undoImpl(isRedo){var undo=this.state.undo.slice(0);var redo=this.state.redo.slice(0);var snapshot;if(isRedo){if(redo.length===0){return}snapshot=redo.pop();undo.push(this.getStateSnapshot())}else{if(undo.length===0){return}snapshot=undo.pop();redo.push(this.getStateSnapshot())}this.setStateSnapshot(snapshot);this.setState({undo:undo,redo:redo})}}},{}],48:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var modifiers={Field:{classes:{"form-group":true}},Help:{classes:{"help-block":true}},Sample:{classes:{"help-block":true}},ArrayControl:{classes:{"form-inline":true}},ArrayItem:{classes:{well:true}},ObjectItem:{classes:{well:true}},FieldTemplateChoices:{classes:{"form-control":true}},AddItem:{classes:{"glyphicon glyphicon-plus":true},label:""},RemoveItem:{classes:{"glyphicon glyphicon-remove":true},label:""},MoveItemBack:{classes:{"glyphicon glyphicon-arrow-up":true},label:""},MoveItemForward:{classes:{"glyphicon glyphicon-arrow-down":true},label:""},ObjectItemKey:{classes:{"form-control":true}},SingleLineString:{classes:{"form-control":true}},String:{classes:{"form-control":true}},PrettyText:{classes:{"form-control":true}},Json:{classes:{"form-control":true}},SelectValue:{classes:{"form-control":true}}};module.exports=function(config){var createElement=config.createElement;return{createElement:function(_createElement){var _createElementWrapper=function createElement(_x,_x2,_x3){return _createElement.apply(this,arguments)};_createElementWrapper.toString=function(){return _createElement.toString()};return _createElementWrapper}(function(name,props,children){name=config.elementName(name);var modifier=modifiers[name];if(modifier){props=_.extend({},props);props.classes=_.extend({},props.classes,modifier.classes);if("label"in modifier){props.label=modifier.label}}return createElement(name,props,children)})}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],49:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;module.exports=function(config){var createElement=config.createElement;var elementClasses={};return{addElementClass:function addElementClass(name,className){name=config.elementName(name);if(!elementClasses[name]){elementClasses[name]={}}elementClasses[name][className]=true},createElement:function(_createElement){var _createElementWrapper=function createElement(_x,_x2,_x3){return _createElement.apply(this,arguments)};_createElementWrapper.toString=function(){return _createElement.toString()};return _createElementWrapper}(function(name,props,children){name=config.elementName(name);if(elementClasses[name]){props=_.extend({},props,{classes:elementClasses[name]})}return createElement(name,props,children)})}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],50:[function(require,module,exports){"use strict";module.exports=function(config){var initRootField=config.initRootField;var initField=config.initField;return{initRootField:function(_initRootField){var _initRootFieldWrapper=function initRootField(_x,_x2){return _initRootField.apply(this,arguments)};_initRootFieldWrapper.toString=function(){return _initRootField.toString()};return _initRootFieldWrapper}(function(field,props){field.meta=props.meta||{};initRootField(field,props)}),initField:function(_initField){var _initFieldWrapper=function initField(_x){return _initField.apply(this,arguments)};_initFieldWrapper.toString=function(){return _initField.toString()};return _initFieldWrapper}(function(field){if(field.parent&&field.parent.meta){field.meta=field.parent.meta}initField(field)})}}},{}],51:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;module.exports=function(config){var initField=config.initField;return{findFieldTemplate:function findFieldTemplate(field,name){if(field.templates[name]){return field.templates[name]}if(field.parent){return config.findFieldTemplate(field.parent,name)}return null},resolveFieldTemplate:function resolveFieldTemplate(field,fieldTemplate){if(!fieldTemplate["extends"]){return fieldTemplate}var ext=fieldTemplate["extends"];if(!_.isArray(ext)){ext=[ext]}var bases=ext.map(function(base){var template=config.findFieldTemplate(field,base);if(!template){throw new Error("Template "+base+" not found.")}return template});var chain=[{}].concat(bases.reverse().concat([fieldTemplate]));fieldTemplate=_.extend.apply(_,chain);return fieldTemplate},initField:function(_initField){var _initFieldWrapper=function initField(_x){return _initField.apply(this,arguments)};_initFieldWrapper.toString=function(){return _initField.toString()};return _initFieldWrapper}(function(field){var templates=field.templates={};var childFieldTemplates=config.fieldChildFieldTemplates(field);childFieldTemplates.forEach(function(fieldTemplate){if(_.isString(fieldTemplate)){return}var key=fieldTemplate.key;var id=fieldTemplate.id;if(fieldTemplate.template){fieldTemplate=_.extend({},fieldTemplate,{template:false})}if(!_.isUndefined(key)&&key!==""){templates[key]=fieldTemplate}if(!_.isUndefined(id)&&id!==""){templates[id]=fieldTemplate}});if(childFieldTemplates.length>0){field.fields=childFieldTemplates.map(function(fieldTemplate){if(_.isString(fieldTemplate)){fieldTemplate=config.findFieldTemplate(field,fieldTemplate)}return config.resolveFieldTemplate(field,fieldTemplate)});field.fields=field.fields.filter(function(fieldTemplate){return!fieldTemplate.template})}var itemFieldTemplates=config.fieldItemFieldTemplates(field);if(itemFieldTemplates.length>0){field.itemFields=itemFieldTemplates.map(function(itemFieldTemplate){if(_.isString(itemFieldTemplate)){itemFieldTemplate=config.findFieldTemplate(field,itemFieldTemplate)}return config.resolveFieldTemplate(field,itemFieldTemplate)})}initField(field)})}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],52:[function(require,module,exports){(function(global){"use strict";var _=typeof window!=="undefined"?window._:typeof global!=="undefined"?global._:null;var utils=exports;utils.deepCopy=function(obj){if(_.isArray(obj)){return obj.map(function(item){return utils.deepCopy(item)})}else if(_.isFunction(obj)){return obj}else if(_.isNull(obj)){return obj}else if(_.isObject(obj)){var copy={};_.each(obj,function(value,key){copy[key]=utils.deepCopy(value)});return copy}else{return obj}};var dashToPascalCache={};utils.dashToPascal=function(s){if(s===""){return""}if(!dashToPascalCache[s]){dashToPascalCache[s]=s.split("-").map(function(part){return part[0].toUpperCase()+part.substring(1)}).join("")}return dashToPascalCache[s]};utils.copyElementStyle=function(fromElement,toElement){var fromStyle=window.getComputedStyle(fromElement,"");if(fromStyle.cssText!==""){toElement.style.cssText=fromStyle.cssText;return}var cssRules=[];for(var i=0;i<fromStyle.length;i++){cssRules.push(fromStyle[i]+":"+fromStyle.getPropertyValue(fromStyle[i])+";")}var cssText=cssRules.join("");toElement.style.cssText=cssText};var browser={isChrome:false,isMozilla:false,isOpera:false,isIe:false,isSafari:false,isUnknown:false};var ua="";if(typeof navigator!=="undefined"){ua=navigator.userAgent}if(ua.indexOf("Chrome")>-1){browser.isChrome=true}else if(ua.indexOf("Safari")>-1){browser.isSafari=true}else if(ua.indexOf("Opera")>-1){browser.isOpera=true}else if(ua.indexOf("Firefox")>-1){browser.isMozilla=true}else if(ua.indexOf("MSIE")>-1){browser.isIe=true}else{browser.isUnknown=true}utils.browser=browser;utils.delegateTo=function(name){return function(){return this[name].apply(this,arguments)}};utils.delegator=function(obj){return function(name){return function(){return obj[name].apply(obj,arguments)}}};utils.capitalize=function(s){return s.charAt(0).toUpperCase()+s.substring(1).toLowerCase()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});